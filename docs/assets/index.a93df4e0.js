const a=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function o(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerpolicy&&(l.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?l.credentials="include":n.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(n){if(n.ep)return;n.ep=!0;const l=o(n);fetch(n.href,l)}};a();class s{constructor(t){let o=document.querySelector("a-scene");this.entity=document.createElement("a-entity"),o.appendChild(this.entity);for(let i in t)this.entity.setAttribute(i,t[i]);return this.entity}}AFRAME.registerComponent("gun",{schema:{hand:{default:""},model:{default:""}},init:function(){var e=this;this.el.addEventListener("triggerdown",()=>{e.shoot(e.el)})},update:function(){var e=this.data.hand,t=this.el,o={hand:e,model:!1};t.setAttribute("vive-controls",o),t.setAttribute("oculus-touch-controls",o),t.setAttribute("daydream-controls",o),t.setAttribute("gearvr-controls",o),t.setAttribute("windows-motion-controls",o);const i=new s({"gltf-model":this.data.model,scale:"0.2 0.2 0.2"});t.appendChild(i)},remove:function(){},tick:function(e,t){},shoot:function(e){console.log("SHOOT!");let t=e.object3D.position,o=e.object3D.rotation,i=new THREE.Vector3(t.x,t.y,t.z),n=new THREE.Euler(o.x,o.y,o.z);new s({bullet:"speed: 0.2; position: "+i.x+" "+i.y+" "+i.z+"; rotation: "+n.x+" "+n.y+" "+n.z,scale:"0.2 0.2 0.2"})}});AFRAME.registerComponent("bullet",{schema:{position:{type:"vec3"},rotation:{type:"vec3"},speed:{type:"number"},model:{default:"./models/bullet.glb"}},init:function(){let e=this.el,t=this.data;e.object3D.position.set(t.position.x,t.position.y,t.position.z),e.object3D.rotation.set(t.rotation.x,t.rotation.y,t.rotation.z),e.setAttribute("gltf-model",t.model),e.setAttribute("ammo-body","type: static; emitCollisionEvents: true"),e.setAttribute("ammo-shape","fit:manual; type: box; halfExtents: 1 1 1;"),e.addEventListener("collidestart",o=>{console.log(o),o.detail.targetEl.body.el.remove()})},update:function(){},remove:function(){console.log("bullet removed")},tick:function(e,t){this.el.object3D.translateZ(-this.data.speed);let o=this.el.object3D.position;(o.z<-20||o.z>20)&&this.el.remove(),(o.y<0||o.y>50)&&this.el.remove()}});AFRAME.registerComponent("balloon",{schema:{model:{default:""}},init:function(){const e=this.el;e.setAttribute("gltf-model",this.data.model),e.setAttribute("ammo-body","type: static"),e.setAttribute("ammo-shape","type:sphere; fit:manual; sphereRadius: 1")},update:function(){},remove:function(){console.log("you scored a point!")},tick:function(e,t){}});new s({gun:"hand: right; model: ./models/gun.glb"});new s({gun:"hand: left; model: ./models/gun.glb"});for(let e=0;e<10;e++){const t=Math.random()*40-20,o=Math.random()*4+1,i=Math.random()*40-20;new s({balloon:"model: ./models/balloon.glb",position:`${t} ${o} ${i}`})}
